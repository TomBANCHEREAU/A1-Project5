-- phpMyAdmin SQL Dump
-- version 4.8.4
-- https://www.phpmyadmin.net/
--
-- Hôte : 127.0.0.1:3306
-- Généré le :  lun. 03 juin 2019 à 13:39
-- Version du serveur :  5.7.24
-- Version de PHP :  7.2.14

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET AUTOCOMMIT = 0;
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Base de données :  `a1-project5`
--

DELIMITER $$
--
-- Procédures
--
DROP PROCEDURE IF EXISTS `addScore`$$
CREATE DEFINER=`root`@`localhost` PROCEDURE `addScore` (IN `MapID` INT, IN `Score` INT, IN `Name` VARCHAR(16))  NO SQL
INSERT INTO `highscore`(`ID_HighScore`,`Score`, `PlayerName`, `MapID`) VALUES (NULL,Score,Name,MapID)$$

DROP PROCEDURE IF EXISTS `getHighScore`$$
CREATE DEFINER=`root`@`localhost` PROCEDURE `getHighScore` (IN `id` INT)  NO SQL
SELECT MAX(Score) as Score, PlayerName, MapID FROM highscore 
WHERE MapID = id 
GROUP BY PlayerName
ORDER BY Score DESC 
LIMIT 5$$

DROP PROCEDURE IF EXISTS `getMapFromID`$$
CREATE DEFINER=`root`@`localhost` PROCEDURE `getMapFromID` (IN `id` INT)  BEGIN
	SELECT Width,Height, Content, PlayerNumber, DiamondsNeeded FROM maplist
    WHERE id = MapID
    LIMIT 1;
    
END$$

DROP PROCEDURE IF EXISTS `getMapList`$$
CREATE DEFINER=`root`@`localhost` PROCEDURE `getMapList` (IN `n_player` INT)  BEGIN
	SELECT MapID FROM maplist
    WHERE PlayerNumber = n_player;
END$$

DROP PROCEDURE IF EXISTS `getMapListFromPlayerNumber`$$
CREATE DEFINER=`root`@`localhost` PROCEDURE `getMapListFromPlayerNumber` (IN `n_player` INT)  BEGIN
	SELECT * FROM maplist
    WHERE PlayerNumber = n_player AND WorldNumber>0 AND Disactivated= 0
    ORDER BY WorldNumber, LevelNumber;
    
END$$

DELIMITER ;

-- --------------------------------------------------------

--
-- Structure de la table `highscore`
--

DROP TABLE IF EXISTS `highscore`;
CREATE TABLE IF NOT EXISTS `highscore` (
  `ID_HighScore` int(11) NOT NULL AUTO_INCREMENT,
  `Score` int(11) NOT NULL,
  `PlayerName` varchar(11) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
  `MapID` int(11) NOT NULL,
  PRIMARY KEY (`ID_HighScore`),
  KEY `HighScore_maplist_FK` (`MapID`)
) ENGINE=InnoDB AUTO_INCREMENT=72 DEFAULT CHARSET=ascii COLLATE=ascii_bin;

--
-- Déchargement des données de la table `highscore`
--

INSERT INTO `highscore` (`ID_HighScore`, `Score`, `PlayerName`, `MapID`) VALUES
(10, 2441, 'TomBAN', 1),
(11, 2200, 'TomBAN', 2),
(12, 1480, 'TomBAN', 3),
(16, 9960, 'Gingly', 4),
(17, 2465, 'Gingly', 1),
(18, 1670, 'Gingly', 2),
(21, 2465, 'Gingly', 1),
(22, 2406, 'Gingly', 1),
(23, 1846, 'Gingly', 2),
(24, 3736, 'Gingly', 3),
(26, 6472, '', 13),
(27, -12029, '', 13),
(28, 2225, '', 1),
(29, 2405, '', 1),
(30, 1008, '', 2),
(31, 6155, '', 13),
(32, 2300, '', 1),
(33, -742, '', 14),
(34, -72, '', 14),
(35, -1219, 'azertyui', 14),
(36, -3797, 'azer', 14),
(37, 2330, 'azertyuiop', 1),
(38, 764, 'azertyuiop', 2),
(39, 5486, 'azertyuiop', 13),
(40, 2394, 'azertyuiop', 1),
(41, 2344, 's', 1),
(42, 834, 's', 2),
(43, 2370, '123', 1),
(44, 1224, '123', 2),
(45, 1897, '123', 3),
(46, 1395, 'TomBAN', 1),
(47, 1585, 'TomBAN', 2),
(48, 2231, 'TomBAN', 3),
(49, 6149, 'TomBAN', 13),
(50, 2335, 'azertyuiop*', 1),
(51, 970, 'azertyuiop*', 2),
(52, 3961, 'azertyuiop*', 3),
(53, 5863, 'azertyuiop*', 13),
(54, 2240, '', 1),
(55, 1264, '', 2),
(56, 3989, '', 3),
(57, 4314, '', 13),
(58, 7397, 's', 7),
(59, 2125, '', 1),
(60, 1795, '', 1),
(61, 2110, '', 2),
(62, 4408, '', 3),
(63, 5731, '', 13),
(64, 11145, '', 7),
(65, 2255, '', 1),
(66, 1350, '', 2),
(67, 4101, '', 3),
(68, 4546, '', 13),
(69, 8313, '', 7),
(70, 2325, 's', 1),
(71, 1758, 's', 2);

-- --------------------------------------------------------

--
-- Structure de la table `maplist`
--

DROP TABLE IF EXISTS `maplist`;
CREATE TABLE IF NOT EXISTS `maplist` (
  `WorldNumber` int(11) NOT NULL,
  `LevelNumber` int(11) NOT NULL,
  `PlayerNumber` int(11) NOT NULL,
  `Disactivated` tinyint(1) NOT NULL DEFAULT '0',
  `Width` int(11) NOT NULL,
  `Height` int(11) NOT NULL,
  `Content` varchar(32767) COLLATE ascii_bin NOT NULL,
  `DiamondsNeeded` int(11) NOT NULL,
  `TimeToFinish` int(11) NOT NULL,
  `MapID` int(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`MapID`),
  KEY `WorldNumber` (`Disactivated`,`PlayerNumber`,`WorldNumber`,`LevelNumber`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=15 DEFAULT CHARSET=ascii COLLATE=ascii_bin;

--
-- Déchargement des données de la table `maplist`
--

INSERT INTO `maplist` (`WorldNumber`, `LevelNumber`, `PlayerNumber`, `Disactivated`, `Width`, `Height`, `Content`, `DiamondsNeeded`, `TimeToFinish`, `MapID`) VALUES
(1, 1, 1, 0, 16, 7, '!!!!!!!!!!!!!!!!\r\n!   ##O!$      !\r\n! A   #!!!  O##!\r\n!#### V!###OO##!\r\n!##V# #!   ##V#!\r\n!#### O    ####!\r\n!!!!!!!!!!!!!!!!', 3, 60, 1),
(1, 2, 1, 0, 36, 13, '!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n!         @OOOOOOOOOOOO@     @  OVO!\r\n! A  V     ############@#####@###O#!\r\n!    #    @                  @   ##!\r\n!@@@@@@@@@@@@@@@@@@@@@@@     @    #!\r\n!V###   O          OO              !\r\n!#  D ########OO###### ############!\r\n!#    ##O#######@         @@@@@@@@@!\r\n!######OVO @@@@@@@@@O@@@@@@#####   !\r\n!      #O######OVO##############   !\r\n!###############O###          C#   !\r\n!               #  #########   # $ !\r\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!', 5, 150, 2),
(1, 3, 1, 0, 12, 28, '!!!!!!!!!!!!\r\n!##########!\r\n!#A#######O!\r\n!@@@#####OO!\r\n!#########V!\r\n!#######@@@!\r\n!#OOOOO### !\r\n!########  !\r\n!O###      !\r\n!#V##      !\r\n!####O     !\r\n!  ##O     !\r\n!   ##O  D !\r\n!  O###    !\r\n!  ###     !\r\n! L ##     !\r\n!   ##V    !\r\n! ####OO   !\r\n!V######## !\r\n!#########O!\r\n!@@@@######!\r\n!###OOO####!\r\n!##########!\r\n!##    U###!\r\n!##      ##!\r\n!#     V  #!\r\n!##OO$    #!\r\n!!!!!!!!!!!!', 5, 150, 3),
(2, 3, 1, 0, 49, 15, '!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n!O   @####################################@  V L!\r\n!#A  ]1              C                     @  #  !\r\n!_1@@@@ OOO                                @#####!\r\n!V##############################################!\r\n!@@@@@@@@          L   #########################!\r\n!    ##########V#### ######OOOOOO###OOO#####    !\r\n!V L          ########     #################### !\r\n!@@@@@@@@@@@@@@@@@@@@@]2@@@@@@@@@@@@@@@@@@@@@@@@_2!\r\n!##################### ###[3#####################!\r\n!                         @                    $!\r\n! V                       @@@@@@@@@@@@@@@@@@@@@@!\r\n!                    OOOOO######################!\r\n!_3OOOO####################               D     V!\r\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!', 4, 200, 4),
(2, 5, 1, 1, 128, 24, '@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n@O ####O########OOO###########O#####O######OO#########OO################################    #    @ O    O  O   O    O O   ###OO@\r\n@ O###OOO  ###########O#######O##################  #######O####### D####################O    C  #@ # O  # O# O # O #OO#   #####@\r\n@  O#######          O#O    ##O##      ####OOO### C###O#O#####O###  ####################O#######     #   O   #O  #  ##       @V@\r\n@   O# O # ## ######## #######O#########################OO#####O#########################  O#    @  O   O#   O#    O     ####O#@ \r\n@    O##### # ####O#OO #O########OO##########O######O#######O######O######O######OOO############O@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n@     O# O  # #####OOOVOOO#################################################################################O#######OO  O      O@\r\n@      O##  # #@@@@@@@@@@@@@@@ ####   @ O   #  O@   ####  @##OO##@@@@@@@@@@@@@  ##O##     @@@@@@  OOO  @@@@@@@@@@@ ## O## ####O@\r\n@      V##  # #  # O #@############## @ #   #O##@  O    O @   ## OOOOOO@OOOOOO   OO     @@@       ###  @      O       # # ####O@\r\n@        O  # ## O # O@###O#O#O#O#### @   #  O#@@@ # OO # @ O##  ######@######   #### @@@O   #######   @  #####       # # ####O@\r\n@       ###O# #O # O #@####O#O#O#O### @@#   O# @V@  O##  @@###   OOOOOO@OOOOOO  ###   @ O#   ## M ##   @_1###     ###### # ####O@\r\n@       # ### ## O # O@###O#O#O#O####  @  OO#  @O@  #   O@O ## O######O@######        @$#O   OOOOOOO   @@@@@@@@  # C O#U# OOOOO@\r\n@       # #O  #O # O #@####O#OVO#O###  @@ ##  @@O@@  O #@@O    O O#O###@ #O#O#   O####@ O#   ## M ##   @OO       ###### # ####O@\r\n@       # ##  ## O # O@###O#O#O#O####   @@ O @@OOO@@#O#@@    O## ######@  ####        @@@O   #######   @V ####        # # ####O@\r\n@       # ##  #O # O #@####O#O#O#O###    @@V@@OOOOO@@V@@ ### O   ###OP2V@_2OOOOO ####     @@@       ###  @OP1  ####      # # ####O@\r\n@       # ##  ## O #  @###O#O#O#O####OOO  @@@OOOOOOO@@@##OO###OO#@@@@@@@@@@@@@   ####     @@@@@@  OOO  @@@@@@@@@@@    # # ####O@\r\n@       # #O  #############OOO###################################                # C#######O##    ###      #####      # # #####@\r\n@       # #####################OO#####################O          #############   ####OOO######             # D #      # # #####@\r\n@       #    L                 ######### D ################################################O########################### #    OV@\r\n@OOOOOO OOOOOOOO############## ###O############O######O#########O#######   ###OO#O###O##  ####O#####################@@@@@@@@@@@@\r\n@#############O## #############################O################O##O##### ##O####O#  O##O##############O@@@@@@@@@@@@@####      @ \r\n@  6   A   9  O##C##########O #####       O   OO    ###    O ##############O##  ############O#######   ##################     #@\r\n@             O## ##################  O  # ####   O        # ######      ############     ####O#####   #               L#    OV@\r\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@', 10, 300, 5),
(2, 1, 2, 1, 36, 13, '@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n@ $       @OOOOOOOOOOOO      @  OVO@\r\n@ AA      ##################_2@###O#@\r\n@_1         P1                  @    #@\r\n@@@@@@@@@@@@@@@@@@@@@@@@     @    #@\r\n@V######O                          @\r\n@###C#########OO###### ######P2#####@\r\n@#######O#######    @ _3    ##@@@###@\r\n@      OVO @@@@@@@@@O@@@@@@@@###@@@@\r\n@      #O######OVO############P3#   @\r\n@###############O###          L# $ @\r\n@               #  #############  V@\r\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@', 5, 150, 6),
(2, 2, 1, 0, 41, 24, '!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n!$         @#############@O@###OOOO#####!\r\n!O A       ########  OO##@V ############!\r\n!@@@@@@@@@@@###    ######@#@############!\r\n!###             #######          ######!\r\n!OOO    ####################    U     ##!\r\n!OOOOOOOOOOOOO#####OO####       ####OOOO!\r\n!##########OO######V####################!\r\n!#######OOO##    #######################!\r\n!     ##################################!\r\n!  ##V###   #####@@@@@@@@@@@@@@@@@@@@@@@!\r\n!######    ######## ]2V   ###############!\r\n!@@@@@@@@_2@@@@@@@@@@@@@@@@@@@OOO########!\r\n!#############################OOO    O##!\r\n!####OOOOOO############   L  ###V##OOO##!\r\n!OOOOOO######################      O####!\r\n!##################V##############OOOOOO!\r\n!#OOO##OOOOOOOOOOO###########OOOOOOOOOOO!\r\n!#############################OOO#######!\r\n!#OO###########   C           ##OOO     !\r\n!#OOOO            ######################!\r\n!####V##################################!\r\n!#####OOOOOOOOOOOOOOOOOOO######     ####!\r\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!', 5, 150, 7),
(3, 5, 1, 1, 128, 24, '@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n@#######   @V#L ########L #         L       @V      L     #U# U       @ @U@U@U@ @V@U@#### ##### ##########@#$##################@\r\n@#A##### 9 @####### L######U########V######U@#           L# #L        @ @ @ @ @U@#@ @#  # ##### ######V###@##############  D  #@\r\n@#######   @@@@@@@@@@@##### ############### @ L           # #@ U      @ @ @ @ @ @ @ @# D#U@@@@@U##########@@@@@@@@@@@@@########@\r\n@    L     @## ############      L          ############### #@        @U@ @ @ @ @ @ @#### ##### ##### C ##@####################@\r\n@##########@## #################@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  U     @ @ @ @ @ @ @ @##V# ##### ##########@## C ###############@\r\n@#############U######################@## ###########   ######@        @ @ @ @ @   @ @@@@@@@@@@@@@@@@   L  @#######@@@@@@@@@@@@@@\r\n@############# ######################@## ########### D ######@   U    @ @ @ @ @ @ @ @#  ####  #           @####################@\r\n@  L@@@@@@@@@@@@@@@@@@@@@@@@## C   ##@##U###@#######   ######@        @ @ @ @ @ @ @ @#  ####  #           @####################@\r\n@########D # @#######################@## ###@################@    U   @ @ @ @ @V@U@ @  U  L  U @ L        @@@@@@@@@@@@@@#  D ##@\r\n@########  # @#####C ################@##V###@########### ####@        @ @ @ @ @@@ @ @#  ####  #@      U   @####################@\r\n@L     ##### @#####  ###     L       @######@@@@@@@@#### ####@     U  @ @ @ @ @U@ @ @    VL    @    V     @####################@\r\n@@@@@@@@####U@#######################@######@   L   V### ####@        @ @ @ @ @ @ @ @#  ####  #@  U       @    L   @@@@@@@@@@@@@\r\n@########### @##########@###################@#######@### ####@      U @ @ @ @ @ @ @ @ U  L  U  @          @######## #U# # #U# #@\r\n@  L         @#####V####@#######@###########@#######@### ####@        @ @ @ @ @ @ @ @#  ####  #@     L    @########U# # #U# # V@\r\n@#######################@#######@########### #######@### ####@       UV###############  ####  #@          ######### # #U# # #U#@\r\n@######@# # ############@L     L@### D #####U#######@### ####@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@    L       @@@@@@@@@@@@@@@\r\n@##  ##@#U#U#@@@@@@@@@@@@#######@###   ##### #######@### ####@########L       @V##### #########################################@\r\n@##  ##@# # ############@###V###@########### #######@### #############   L    @######U######################################V##@\r\n@##C ##@################@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@## ############@      L @   L   ###############       L##################@\r\n@##  ##@## C ###V## D ##@    U             L@########### ############@ L      @######@@@@@@@@@@@@@@@@@@@V@@@@@@@@@@@@@##### D #@\r\n@######@#################         L  U      @L          U         @@@@    L   @##########@######@####L       ##############   #@\r\n@##V#####################               L   ########################V@       LV#######@#####@L#####@###########   L       #####@\r\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@', 20, 300, 8),
(2, 1, 1, 1, 16, 7, '@@@@@@@@@@@@@@@@\r\n@A  ##O@     #$@\r\n@O    #@   OO #@\r\n@# #  V@ V ##  @\r\n@  V     #     @\r\n@_1 #  ]1   #    @\r\n@@@@@@@@@@@@@@@@', 3, 60, 9),
(2, 4, 2, 1, 76, 9, '@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n@######O#######@####O   ##O O  ##@O@O@@@@@@@V########### O####O#########O#V@\r\n@AA ###V#######@####@## #O# #@ @###@#######V@@@@@@@@@@@@ ######   O#####O# @\r\n@##_1################@########@V@##V@#@@@@@@@@O#####O###@ ###O##O##V#####O# @\r\n@@@@@@@ @@@@@@]1@@@@@@@@@@@@@@@@@#@@@#@## #########OV#### #####O#  #########@\r\n@O      ######@#####OV@## M  V#@#####@  O         #####@O#####V  # ##### #O@\r\n@# ####O#@@@@_2@##########     #@@@@@#@ ######V####O ########O##O##V#####OO#@\r\n@VO####O##############]2########O        VO###_3####OVO#]3@O###############V$#@\r\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n', 15, 200, 10),
(2, 1, 1, 0, 20, 15, '!!!!!!!!!!!!!!!!!!!!\r\n!    O#!####### ###!\r\n! A  ##!####### #O#!\r\n!###   !####### ###!\r\n!#V#   ]0  O ### #V#!\r\n!!!!!_0!!!!!!V## ###!\r\n!# ########!O## ###!\r\n!#       ##!!## ###!\r\n!# ##### ##!###U###!\r\n!# ##V#   O]1# # ###!\r\n!# !!!!!!_1!!!_1!!!!!!\r\n!# ####O !    !O###!\r\n!#U   ##    $ [1# V#!\r\n!# ###O !!!_1!!!! ##!\r\n!!!!!!!_1!######!!!!!', 3, 60, 13),
(1, 1, 2, 0, 16, 10, '!!!!!!!!!!!!!!!!\r\n!#####O  !C  O#!\r\n!#A##### ! $ !#!\r\n!######VU@ ! !#!\r\n!@@@@@@@ @ ! !#!\r\n!######@ !   O#!\r\n!#O##A#@@!!!!!#!\r\n!####### @#####!\r\n! L  V   @##V##!\r\n!!!!!!!!!!!!!!!!', 3, 120, 14);

--
-- Contraintes pour les tables déchargées
--

--
-- Contraintes pour la table `highscore`
--
ALTER TABLE `highscore`
  ADD CONSTRAINT `HighScore_maplist_FK` FOREIGN KEY (`MapID`) REFERENCES `maplist` (`MapID`);
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
